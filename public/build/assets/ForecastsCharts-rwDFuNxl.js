import{d as k,n as C,r as d,c as p,w as u,W as b,a as g,o as m,b as i,u as f,m as y,e as w,f as t,j as S,g as V,h as B,i as F,F as L}from"./app-Bzay_NOV.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-sjnllyIJ.js";import{C as N,p as D,a as E,b as P,L as j,c as z,d as M,P as W,i as A,f as O}from"./index-C4W8HvQg.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3Ozja9l.js";import"./useForwardExpose-DviW8cfF.js";import"./RovingFocusGroup-BGDgKuKE.js";const T={class:"flex h-full flex-1 flex-col gap-4 p-4"},U={class:"flex items-center justify-between mb-4"},$={class:"text-sm text-gray-700 dark:text-gray-200"},q={class:"rounded-xl border border-sidebar-border/70 bg-white dark:bg-background dark:border-sidebar-border shadow-sm"},G={class:"p-4"},H={class:"relative h-[400px] w-full"},I={class:"text-center mt-6"},te=k({__name:"ForecastsCharts",setup(J){N.register(D,E,P,j,z,M,W,A);const r=C(),c=d([...r.props.forecasts]),s=p(()=>r.props.pagination),l=d(20);u(l,a=>{b.get("/marketplace/forecasts/charts",{per_page:a},{preserveState:!0,preserveScroll:!0,only:["forecasts","pagination"],replace:!0})}),u(()=>r.props.forecasts,a=>{c.value=[...a]});const v=()=>{var a;(a=s.value)!=null&&a.next_page_url&&b.get(s.value.next_page_url,{},{preserveState:!0,preserveScroll:!0,only:["forecasts","pagination"]})},x=p(()=>{const a=c.value;return{labels:a.map(e=>e.name),datasets:[{label:"Остаток",data:a.map(e=>e.current_stock),borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.2)",fill:!0,tension:.4,pointBackgroundColor:"rgba(59, 130, 246, 1)",pointRadius:3},{label:"Прогноз",data:a.map(e=>e.forecast),borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.2)",fill:!0,tension:.4,pointBackgroundColor:"rgba(34, 197, 94, 1)",pointRadius:3}]}}),_={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#374151",font:{size:14}}},title:{display:!0,text:"Прогноз и остатки товаров",color:"#1f2937",font:{size:20}},tooltip:{mode:"index",intersect:!1}},scales:{x:{ticks:{color:"#4b5563",callback:function(a,e,n){const o=this.getLabelForValue(a);return o.length>20?o.substring(0,20)+"…":o},maxRotation:45,minRotation:30},grid:{display:!1}},y:{ticks:{color:"#4b5563"},grid:{color:"rgba(203, 213, 225, 0.2)"}}}},h=[{title:"Dashboard",href:"/dashboard"},{title:"Графики",href:"/marketplace/forecasts/charts"}];return(a,e)=>(m(),g(L,null,[i(f(y),{title:"Графики прогнозов"}),i(R,{breadcrumbs:h},{default:w(()=>{var n;return[t("div",T,[t("div",U,[t("label",$,[e[2]||(e[2]=S(" Показывать: ")),V(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),class:"ml-2 p-1 border rounded"},e[1]||(e[1]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1),t("option",{value:75},"75",-1),t("option",{value:100},"100",-1),t("option",{value:500},"500",-1)]),512),[[B,l.value]])])]),t("div",q,[t("div",G,[e[3]||(e[3]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white mb-4"},"График прогнозов и остатков",-1)),t("div",H,[i(f(O),{data:x.value,options:_},null,8,["data"])])])]),t("div",I,[(n=s.value)!=null&&n.next_page_url?(m(),g("button",{key:0,onClick:v,class:"rounded-md bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 transition"}," Загрузить ещё данные ")):F("",!0)])])]}),_:1})],64))}});export{te as default};
